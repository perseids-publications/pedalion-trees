/*
 * Arethusa - a backend-independent client-side annotation framework
 * http://github.com/alpheios-project/arethusa
 *
 * Version 0.2.5
 * built from branch widget-api
 * at 6e816c7cdf1e70df605ff74394a5b1833a61aa40
 * on 2020-03-11T17:00:57.844Z
 *
 * Published under the MIT license
 */

angular.module("arethusa.tools",[]),angular.module("arethusa.tools").controller("MorphToolsCtrl",["$scope","plugins","latinAttrs","greekAttrs","configurator","MORPH_IMPORTS","$http","$injector","$q","fileHandler","_",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){N.plugins.morph=K[b],a.usedLanguage=b}function m(){l("lat"),b.start(["morph"]).then(function(){F=b.get("morph"),G=h.get("morphLocalStorage"),a.ready=!0})}function n(a,b){var c=i.defer(),d=M[b];return d?c.resolve(d):g.get(b,L).then(function(a){var d=a.data.name;M[b]=d,c.resolve(d)}),c.promise}function o(b,c){q();var d=b.split("\n");angular.forEach(d,function(b,c){var d=b.split(","),e=d[0],f={lemma:d[1],postag:d[2]};n(f,d[3]).then(function(b){f.origin=b,F.postagToAttributes(f),p(e,f)&&(F.addToLocalStorage(d[0],f),a.status.count+=1)})})}function p(a,b){var c;return G.retriever.getData(a,function(a){c=a}),!c||!aU.find(c,function(a){return G.comparator(b,a)})}function q(){var b=["importForms","exportForms","importFrequency","exportFrequency"];a.status=k.inject(b,function(a,b){return a[b]={count:null},a},{})}function r(b){a.importStarted=!0,g.get(b.route).then(function(c){l(b.language),o(c.data),a.importStarted=!1})}function s(b,c){q();var d=0;j.upload(function(e){k.forEach(e,function(a,c){d+=G[b](c,a)}),c(e,d),a.$digest()})}function t(a,b,c){q();var d=G[b]();j.download(a,JSON.stringify(d,null,2),J),c(d)}function u(){s("addForms",z)}function v(){t(H,"getForms",y)}function w(){t(I,"getPreferences",A)}function x(){s("addPreferences",B)}function y(a){C("exportForms",D(a))}function z(a,b){C("importForms",D(a),b)}function A(a){C("exportFrequency",E(a))}function B(a,b){C("importFrequency",E(a),b)}function C(b,c,d){a.status[b].count=null!==d?d:c}function D(a){return k.inject(a,function(a,b){return a+=b.length},0)}function E(a){return k.inject(a,function(a,b,c){return a+=b.split(G.delimiters.preference).length},0)}var F,G,H="arethusa_morph_forms.json",I="arethusa_morph_frequency.json",J="application/json",K={lat:c.data,grc:d.data},L={headers:{Accept:"application/json"}},M={},N=e.configuration;a.loadCsvFile=r,a.importFile=u,a.exportFile=v,a.importFrequencyFile=x,a.exportFrequencyFile=w,m()}]),angular.module("arethusa.tools").constant("MORPH_IMPORTS",[{name:"Latin Morphology",language:"lat",route:"..."},{name:"Greek Morphology",language:"grc",route:"..."},{name:"Test Data from Vanessa",language:"grc",route:"http://www.perseids.org/morph/masterlocal.csv"}]),angular.module("arethusa.tools").run(["$templateCache",function(a){"use strict";a.put("js/arethusa.tools/templates/morph_tools.html",'<div class="row">\n  <h3>Arethusa Morph Tools</h3>\n\n  <div class="morph-tools-form-import">\n    <div class="fade" ng-if="ready">\n      <ul>\n        <li ng-repeat="file in files">\n          <a ng-click="loadCsvFile(file)">{{ file.name }}</a>\n        </li>\n      </ul>\n    </div>\n\n    <div>\n      <button class="small rounded" ng-click="importFile()">\n        Import forms from file\n      </button>\n      <button class="small rounded" ng-click="exportFile()">\n        Export forms to file\n      </button>\n    </div>\n\n    <div ng-if="status.importForms.count != null">\n      {{ status.importForms.count}} forms successfully imported!\n    </div>\n\n    <div ng-if="status.exportForms.count">\n      {{ status.exportForms.count}} forms successfully exported!\n    </div>\n\n    <div ng-if="importStarted" style="color: green">\n      Processing import...\n    </div>\n  </div>\n\n  <div class="morph-tools-frequency-import">\n    <div>\n      <button class="small rounded" ng-click="importFrequencyFile()">\n        Import frequency data from file\n      </button>\n      <button class="small rounded" ng-click="exportFrequencyFile()">\n        Export frequency data to file\n      </button>\n    </div>\n\n    <div ng-if="status.importFrequency.count != null">\n      {{ status.importFrequency.count}} forms successfully imported!\n    </div>\n\n    <div ng-if="status.exportFrequency.count">\n      {{ status.exportFrequency.count}} forms successfully exported!\n    </div>\n\n  </div>\n</div>\n')}]);
//# sourceMappingURL=arethusa.tools.min.map